/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2024 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const e="SHOW_MB_ACTIVATE_BANNER",n="PING_CONTENT_MB_VIDEO_CHECK",t="ACTIVATE_BANNER",o="PAGE_BANNER";const r=0,a=0,l=1,i=2,c=3,s=4,d=1,u=2,g=3,m=4,f={BACKGROUND:"BACKGROUND",CONTENT:"CONTENT",TELEMETRY:"TELEMETRY"},E={DEFAULT:"color: #000000; font-weight: normal; font-style:normal; background: #FFFFFF;",BACKGROUND:"color: #8D0DBA; font-weight: bold; background: #FFFFFF;",CONTENT:"color: #F54A26; font-weight: bold; background: #FFFFFF;",TELEMETRY:"color: #147831; font-weight: bold; background: #FFFFFF;"};class h{static log(e,n=null){b(e,d,n)}static error(e,n=null){b(e,u,n)}static warn(e,n=null){b(e,g,n)}static debug(e,n=null){b(e,m,n)}}const b=(e,n,t)=>{const o=r;if(o===a)return;let h="chrome-extension:"===location.protocol?f.BACKGROUND:f.CONTENT;t&&f[t]&&(h=t);const b=new Date,p=n===u?e:`%c[${h} ${b.toLocaleString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}]: %c${e}`,T=E.DEFAULT;let y=E[h];if(y||(y=T),o>=i&&n===u&&console.error(e),o>=l&&n===d&&console.log(p,y,T),o>=c&&n===g){const e="color: #FFA500; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cWARN - ${p}`,e,y,T)}if(o>=s&&n===m){const e="color: #FF33D7; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cDEBUG - ${p}`,e,y,T)}};class p{constructor(e){this.pingCommand=e,this.basePingListener(),this.addIdentifier()}basePingListener(e=null){((e,n=null,t)=>{"function"==typeof t?chrome.runtime.onMessage.addListener(((o,r,a)=>{if(r.id===chrome.runtime.id&&"object"==typeof o&&!Array.isArray(o)&&o?.ipcId===e)return t({promises:n,request:o,sender:r,sendResponse:a})})):h.error("Provided with invalid callback function")})("WA",null,(({request:n,sendResponse:t})=>{const{command:o}=n;if(o===this.pingCommand)return h.debug(`File Injection [pinged]: Received ${o} command`),t({content:!0}),"function"==typeof e&&e(),!0}))}addIdentifier(){var e;e=()=>{const e=document.createElement("span");e.id=this.pingCommand,e.style.cssText="display:none",document.body.appendChild(e)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e))}}const T=async(e,n,t,o)=>{try{y(e,n,t,o)}catch(e){h.warn(`[broadcast] Unexpected error when calling command: "${n}", err: ${e.message}`)}},y=(e,n,t,o,r=null)=>{if(!chrome.tabs)throw new Error('"tabs" permission not set in manifest.');return chrome.tabs.sendMessage(o,{ipcId:e,command:n,...t},{frameId:r})},A=(e,n={},t)=>(async(e,n,t={},o={})=>{try{if(o?.tabId){const{tabId:r,frameId:a}=o;return await y(e,n,t,r,a)}if(o?.broadcast){const r=await chrome.tabs.query({}),{broadcastIgnoreId:a=[]}=o;return r.filter((({id:e})=>!a.includes(e))).forEach((({id:o})=>{T(e,n,t,o)})),!0}return await chrome.runtime.sendMessage({ipcId:e,command:n,...t})}catch(e){return h.warn(`Unexpected error when calling command: "${n}", err: ${e.message}`),null}})("WA",e,n,t),N={NONE:0,LINKEDIN:1,INSTAGRAM:2,YOUTUBE:4,FACEBOOK:8,TWITTER:16,REDDIT:32},F=(Object.values(N).reduce(((e,n)=>e+n)),{NONE:"NONE",ONLY_SECURE_SEARCH:"ONLY_SECURE_SEARCH",ALL:"ALL",*[Symbol.iterator](){for(const e of Object.keys(this))yield e}}),{NONE:w,...L}=N,R={name:"FINGER_PRINT",type:"number"},C={name:"FIRST_PARTY",type:"number"},I={name:"THIRD_PARTY",type:"number"},O=chrome,x=(Symbol.iterator,O.runtime.getURL(""),R.name,C.name,I.name,"wa-mb"),M="wa_mb_video",_={dataCollector:null,dictionaryMapper:null,eventManager:null,datasetManager:null,eventHandler:null,profiles:null,rulesManager:null,storage:new Map,engine:null,url:null,externalLogger:{log:null,error:null,warn:null,debug:null}},D="EXTN_TELEMETRY",S="#036C5C";class B{static log(e){"function"!=typeof _.externalLogger.log?console.log(`log: ${e}`):_.externalLogger.log(e,D,S)}static error(e){"function"!=typeof _.externalLogger.error?console.log(`error: ${e}`):_.externalLogger.error(e,D,S)}static warn(e){"function"!=typeof _.externalLogger.warn?console.log(`warn: ${e}`):_.externalLogger.warn(e,D,S)}static debug(e){"function"!=typeof _.externalLogger.debug?console.log(`debug: ${e}`):_.externalLogger.debug(e,D,S)}static logRawTrack(){}static logAutomationError(){}}const v=720;const U=new class extends p{constructor(){super(n),this.bannerTriggered=!1}main(){try{const e=document.querySelectorAll("video");if(0===e.length)return;e.forEach((n=>{["play","playing"].forEach((t=>{n.addEventListener(t,(({currentTarget:n})=>{this.isMuted(n)||this.showBanner(n,e.length)})),this.isPlayingAndAudible(n)&&this.showBanner(n,e.length)}))}))}catch(e){B.error(e)}}showBanner(n,r){if(!this.bannerTriggered){if(this.bannerTriggered=!0,1===r&&n.offsetWidth>=v)return n.setAttribute(x,M),void A(e,{bannerType:t});A(e,{bannerType:o})}}isPlayingAndAudible(e){return!(!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)||this.isMuted(e))}isMuted(e){return e.muted}};var $;$=()=>{setTimeout((()=>{U.main()}),2e3)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?$():document.addEventListener("DOMContentLoaded",$))})();
//# sourceMappingURL=../sourceMap/chrome/scripts/content_mb_video_check.js.map