/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2024 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const N="FF_IFRAME_HELPER_INFO",e={UNBLOCK_IFRAME:"UNBLOCK_IFRAME",BALLOON_MESSAGE:"BALLOON_MESSAGE",SIDEBAR:"SIDEBAR",TOPBAR:"TOPBAR",DLS_POPUP:"DLS_POPUP",NO_NATIVE_TOAST:"NO_NATIVE_TOAST",PING_CONTENT_ANNOTATION:"PING_CONTENT_ANNOTATION",PING_CONTENT_RAT_DETECTION:"PING_CONTENT_RAT_DETECTION",PING_CONTENT_IFRAME_BANNER:"PING_CONTENT_IFRAME_BANNER",PING_CONTENT_AUTOPLAY_DETECTION:"PING_CONTENT_AUTOPLAY_DETECTION",PING_CONTENT_SIDEBAR_MAIN:"PING_CONTENT_SIDEBAR_MAIN",PING_CONTENT_IDPS:"PING_CONTENT_IDPS",PING_CONTENT_APS_TOAST:"PING_CONTENT_APS_TOAST",PING_CONTENT_APS_BALLOON:"PING_CONTENT_APS_BALLOON",PING_CONTENT_APS_OBSERVER:"PING_CONTENT_APS_OBSERVER",PING_CONTENT_SITE_LISTENER:"PING_CONTENT_SITE_LISTENER",PING_CONTENT_DLS_POPUP:"PING_CONTENT_DLS_POPUP",PING_CONTENT_NO_NATIVE_TOAST:"PING_CONTENT_NO_NATIVE_TOAST",PING_CONTENT_MB_VIDEO_CHECK:"PING_CONTENT_MB_VIDEO_CHECK",PING_CONTENT_MB_ACTIVATE_BANNER:"PING_CONTENT_MB_ACTIVATE_BANNER",PING_CONTENT_MB_PAGE_BANNER:"PING_CONTENT_MB_PAGE_BANNER",PING_IFRAME_FORM_CHECK:"PING_IFRAME_FORM_CHECK",PING_IFRAME_FORM_DETECTION:"PING_IFRAME_FORM_DETECTION",PING_IFRAME_BLOCK:"PING_IFRAME_BLOCK",PING_IFRAME_HELPER:"PING_IFRAME_HELPER",PING_CONTENT_MB_BANNER:"PING_CONTENT_MB_BANNER",PING_CONTENT_MB_SIDEBAR:"PING_CONTENT_MB_SIDEBAR",MB_BANNER_SHOW:"MB_BANNER_SHOW",MB_BANNER_REMOVE:"MB_BANNER_REMOVE",MB_INCOMING_AUDIO_DATA:"MB_INCOMING_AUDIO_DATA",BROADCAST_MB_UPDATE_UI:"BROADCAST_MB_UPDATE_UI",APS_REGISTRATION_PAGE:"APS_REGISTRATION_PAGE",BROADCAST_TO_FOREGROUND:"BROADCAST_TO_FOREGROUND",TRIGGER_AJ_TOAST:"TRIGGER_AJ_TOAST"};const _=0,n=0,t=1,T=2,o=3,E=4,r=1,I=2,A=3,O=4,s={BACKGROUND:"BACKGROUND",CONTENT:"CONTENT",TELEMETRY:"TELEMETRY"},c={DEFAULT:"color: #000000; font-weight: normal; font-style:normal; background: #FFFFFF;",BACKGROUND:"color: #8D0DBA; font-weight: bold; background: #FFFFFF;",CONTENT:"color: #F54A26; font-weight: bold; background: #FFFFFF;",TELEMETRY:"color: #147831; font-weight: bold; background: #FFFFFF;"};class a{static log(N,e=null){i(N,r,e)}static error(N,e=null){i(N,I,e)}static warn(N,e=null){i(N,A,e)}static debug(N,e=null){i(N,O,e)}}const i=(N,e,a)=>{const i=_;if(i===n)return;let d="chrome-extension:"===location.protocol?s.BACKGROUND:s.CONTENT;a&&s[a]&&(d=a);const P=new Date,R=e===I?N:`%c[${d} ${P.toLocaleString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}]: %c${N}`,l=c.DEFAULT;let C=c[d];if(C||(C=l),i>=T&&e===I&&console.error(N),i>=t&&e===r&&console.log(R,C,l),i>=o&&e===A){const N="color: #FFA500; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cWARN - ${R}`,N,C,l)}if(i>=E&&e===O){const N="color: #FF33D7; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cDEBUG - ${R}`,N,C,l)}};class d{constructor(N){this.pingCommand=N,this.basePingListener(),this.addIdentifier()}basePingListener(N=null){((N,e=null,_)=>{"function"==typeof _?chrome.runtime.onMessage.addListener(((n,t,T)=>{if(t.id===chrome.runtime.id&&"object"==typeof n&&!Array.isArray(n)&&n?.ipcId===N)return _({promises:e,request:n,sender:t,sendResponse:T})})):a.error("Provided with invalid callback function")})("WA",null,(({request:e,sendResponse:_})=>{const{command:n}=e;if(n===this.pingCommand)return a.debug(`File Injection [pinged]: Received ${n} command`),_({content:!0}),"function"==typeof N&&N(),!0}))}addIdentifier(){var N;N=()=>{const N=document.createElement("span");N.id=this.pingCommand,N.style.cssText="display:none",document.body.appendChild(N)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?N():document.addEventListener("DOMContentLoaded",N))}}const P=async(N,e,_,n)=>{try{R(N,e,_,n)}catch(N){a.warn(`[broadcast] Unexpected error when calling command: "${e}", err: ${N.message}`)}},R=(N,e,_,n,t=null)=>{if(!chrome.tabs)throw new Error('"tabs" permission not set in manifest.');return chrome.tabs.sendMessage(n,{ipcId:N,command:e,..._},{frameId:t})},l=(N,e={},_)=>(async(N,e,_={},n={})=>{try{if(n?.tabId){const{tabId:t,frameId:T}=n;return await R(N,e,_,t,T)}if(n?.broadcast){const t=await chrome.tabs.query({}),{broadcastIgnoreId:T=[]}=n;return t.filter((({id:N})=>!T.includes(N))).forEach((({id:n})=>{P(N,e,_,n)})),!0}return await chrome.runtime.sendMessage({ipcId:N,command:e,..._})}catch(N){return a.warn(`Unexpected error when calling command: "${e}", err: ${N.message}`),null}})("WA",N,e,_);(new class extends d{constructor(){super(e.PING_CONTENT_IFRAME_HELPER),this.onPageShow=this.onPageShow.bind(this)}async main(){window.addEventListener("pageshow",this.onPageShow)}onPageShow(){try{const e=document.querySelectorAll("iframe");if(0===e.length)return!1;const _=[];e.forEach((N=>{const e={frameId:browser.runtime.getFrameId(N),frameSrc:N.src};_.push(e)})),l(N,{listIFrameIdUrl:_})}catch(N){a.error(N.message)}return!0}}).main()})();
//# sourceMappingURL=../sourceMap/chrome/scripts/content_iframe_helper.js.map